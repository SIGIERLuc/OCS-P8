!function(t){"use strict";function o(t,o){if(o=o||function(){},this._dbName=t,!localStorage[t]){localStorage[t]=JSON.stringify({todos:[]})}o.call(this,JSON.parse(localStorage[t]))}o.prototype.find=function(t,o){if(o){var a=JSON.parse(localStorage[this._dbName]).todos;o.call(this,a.filter(function(o){for(var a in t)if(t[a]!==o[a])return!1;return!0}))}},o.prototype.findAll=function(t){(t=t||function(){}).call(this,JSON.parse(localStorage[this._dbName]).todos)},o.prototype.save=function(t,o,a){var i=JSON.parse(localStorage[this._dbName]),e=i.todos;if(o=o||function(){},a){for(var r=0;r<e.length;r++)if(e[r].id===a){for(var l in t)e[r][l]=t[l];break}localStorage[this._dbName]=JSON.stringify(i),o.call(this,e)}else t.id=Date.now(),e.push(t),localStorage[this._dbName]=JSON.stringify(i),o.call(this,[t])},o.prototype.remove=function(t,o){for(var a=JSON.parse(localStorage.getItem(this._dbName)),i=0;i<a.length;i++)if(a[i].id==t){a.splice(i,1);break}localStorage.setItem(this._dbName,JSON.stringify(a)),o.call(this,a)},o.prototype.drop=function(t){var o=[];localStorage[this._dbName]=JSON.stringify(o),t.call(this,o)},t.app=t.app||{},t.app.Store=o}(window);